#!/usr/bin/env bash
set -euo pipefail
echo "Будет попытка удалить созданные файлы и пакеты (если они есть)."

# Остановим/выключим lightdm
sudo systemctl disable --now lightdm || true

# удалим desktop wrappers и session
sudo rm -f /usr/local/bin/bspwm-session
sudo rm -f /usr/share/xsessions/bspwm.desktop
sudo rm -f /usr/share/wayland-sessions/hyprland.desktop || true
sudo rm -f /etc/lightdm/lightdm.conf.d/50-my-greeter.conf || true

# удаляем конфиги в домашней папке (осторожно!)
rm -rf ~/.config/bspwm ~/.config/sxhkd ~/.config/polybar ~/.config/picom ~/.config/hyprland
rm -rf ~/Pictures/wallpapers/default.jpg
# oh-my-zsh (опционально)
rm -rf ~/.oh-my-zsh
# удаляем exodia папки из системных директорий (только те что начинаются с exodia-*)
sudo rm -rf /usr/share/backgrounds/*exodia* /usr/share/icons/*exodia* /usr/share/themes/*exodia*

# попытка удалить некоторые пакеты (необязательная) — оставлю закомментированной,
# чтобы ты принял решение вручную. Если хочешь, раскомментируй и запусти.
# sudo pacman -Rns --noconfirm bspwm sxhkd polybar picom lightdm lightdm-gtk-greeter \
#   alacritty kitty firefox chromium pipewire wireplumber pavucontrol neovim zsh

echo "Готово. Проверь систему вручную. Не забудь перезагрузить, если нужно."
